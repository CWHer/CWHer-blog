---
title: CodeForces-379F New Year Tree
date: 2018-08-12 19:32:34
tags: [树形结构,直径,倍增]
categories: [OI]
password:
top: 0
mathjax: true
---
**题目大意：**
初始时有一棵4个节点的三叉树
每次操作在一个叶子节点下面加入两个节点
问每次操作完树的直径


设当前树的直径为*S-T*
每次加入节点后，树的直径至多只会改变一个端点，另一个节点仍是*S* 或*T*

证明如下
- 考虑加入节点*x* 的父节点$x_{fa}$，在*x* 未加入时，根据直径的求法，离$x_{fa}$最远的点一定是*S* 或*T*
- 再加入*x* 后，易得离$x_{fa}$最远的点还是*S* 或*T*，因此离*x* 最远的点也是*S* 或*T*

因此每次求一遍*x* 到*S*，*T* 的距离，若大于*S-T* 就更新

代码就不放了